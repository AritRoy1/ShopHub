{% extends "customer/base.html" %}

{% comment %} Code For Pagination {% endcomment %}


{% block search-tag %}

{% endblock search-tag %}

{% block search %}
{% load static %}
<link rel="stylesheet" href="{% static 'product/css/style2.css' %}">

{% if query %}
<div class="dropdown mt-3" >
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
      Sort by
    </button>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="{% url 'search' %}?sort=1&search={{query}}">Low to High</a>
      <a class="dropdown-item" href="{% url 'search' %}?sort=2&search={{query}}">High to Low</a>
    </div>
  </div> 
 {% endif %}
  
    <h2 class = "text-center">Search Results for "{{ query }}"</h2>

<div class="row mt-4">
    <div class="val col-md-3">
        <h1>Filters</h1>  <br>
        <h3>By price</h3> <br>
       
        <a href="{% url 'search' %}?test=1&search={{query}}">{{ query }} under 30000</h3></a> <br> <br>
        <a href="{% url 'search' %}?test=2&search={{query}}">{{ query }} above 30000</h3></a> <br> <br>

        <h3>By Brand</h3> 
        {% if query %}
        
        {% for item in brand_item %}
        <a href="{% url 'search' %}?brand={{item.brand}}&search={{query}}"> {{item.brand}} </a> <br>
    
        {% endfor %} <br>

        <h3>By color</h3>

        {% for item in color_item %}
        <a href="{% url 'search' %}?color={{item.color}}&search={{query}}"> {{item.color}} </a> <br>
    
        {% endfor %} <br>
        {% endif %}

    </div>
    
    <div class="col-md-9"> 

        {% for img in image %}
        <a href="{% url 'product-detail' img.id %}">
        <div class="col-sm-3">
            
            <img src="{{ img.image.url }}" alt="" height="300px" width="300px">
        </div>
            <div class="col-sm-6">
            {{img.product.name}}  <b>  Rs. {{img.product.price}}</b> </b> <br>{{img.product.description|truncatewords:20}}
        </div>
    </a>
         <hr>
        {% endfor %}
    </div>
</div> 

<div>
<span>

    {% if image.has_previous %}
    <a href="?page={{image.next_page_number}}">Previous</a>
    {% endif %}
    <span>{{image.number}}</span>

    {% if image.has_next %}
    <a href="">Next</a>
    {% endif %}
</span>

</div>




{% endblock search %}





{% comment %} Main Working Code  {% endcomment %}


{% comment %} 
{% extends "customer/base.html" %}


{% block search-tag %}

{% endblock search-tag %}

{% block search %}
{% load static %}
<link rel="stylesheet" href="{% static 'product/css/style2.css' %}">

{% if query %}
<div class="dropdown mt-3" >
    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
      Sort by
    </button>
    <div class="dropdown-menu">
      <a class="dropdown-item" href="{% url 'search' %}?sort=1&search={{query}}">Low to High</a>
      <a class="dropdown-item" href="{% url 'search' %}?sort=2&search={{query}}">High to Low</a>
    </div>
  </div> 
 {% endif %}
  
    <h2 class = "text-center">Search Results for "{{ query }}"</h2>

<div class="row mt-4">
    <div class="val col-md-3">
        <h1>Filters</h1>  <br>
        <h3>By price</h3> <br>
       
        <a href="{% url 'search' %}?test=1&search={{query}}">{{ query }} under 30000</h3></a> <br> <br>
        <a href="{% url 'search' %}?test=2&search={{query}}">{{ query }} above 30000</h3></a> <br> <br>

        <h3>By Brand</h3> 
        {% if query %}
        
        {% for item in brand_item %}
        <a href="{% url 'search' %}?brand={{item.brand}}&search={{query}}"> {{item.brand}} </a> <br>
    
        {% endfor %} <br>

        <h3>By color</h3>

        {% for item in color_item %}
        <a href="{% url 'search' %}?color={{item.color}}&search={{query}}"> {{item.color}} </a> <br>
    
        {% endfor %} <br>
        {% endif %}

    </div>
    
    <div class="col-md-9"> 

        {% for img in image %}
        <a href="{% url 'product-detail' img.id %}">
        <div class="col-sm-3">
            
            <img src="{{ img.image.url }}" alt="" height="300px" width="300px">
        </div>
            <div class="col-sm-6">
            {{img.product.name}}  <b>  Rs. {{img.product.price}}</b> </b> <br>{{img.product.description|truncatewords:20}}
        </div>
    </a>
         <hr>
        {% endfor %}
    </div>
</div> 


{% endblock search %} {% endcomment %}






